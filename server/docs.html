<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<style>
		body {
			padding: 2rem;
			background-color: #27272a;
			color: #e2e8f0;
			font-family: Arial, Helvetica, sans-serif;
		}

		h1,
		h2 {
			font-weight: normal;
		}

		h2,
		p,
		ul {
			margin-top: 2rem;
		}

		a {
			color: #ff9800;
		}

		a:visited {
			color: #ff9800;
		}

		code {
			background-color: #3f3f46;
		}

		ul {
			padding-inline-start: 1em;
		}

		li {
			margin-bottom: 1em;
		}

		.hint {
			font-style: italic;
			font-size: 0.9em;
			margin-top: 0.5em;
		}
	</style>
	<title>API | Freecycle</title>
</head>

<body>
	<header>
		<h1>Freecycle Server</h1>
	</header>
	<main>
		<p>This is the server for the Freecycle web app. Here you can access the API and run your own requests. The API
			follows
			the <a href="https://en.wikipedia.org/wiki/REST" target="_blank">RESTful architectural style</a>. Try
			running
			some
			requests using the <a href="#curl-commands">example curl commands</a> below.</p>
		<h2><a id="client-url" target="blank" href="">Freecycle client</a></h2>
		<h2><a href="./openapi.html">OpenAPI Spec</a></h2>
		<h2 id="curl-commands">Example curl commands</h2>
		<ul>
			<li>
				<code>
				curl <span class="url">[url]</span>/items
			</code>
				<div class="hint">
					Returns all items in JSON format.
				</div>
			</li>
			<li>
				<code>
				curl -X POST <span class="url">[url]</span>/item -H "Content-Type: application/json" -d '{"user_id": "Item123",
				"keywords": ["Example", "Item", "Listing"], "description": "An example item listing", "lat": 51.2798438,
				"lon": 1.0830275}'
			</code>
				<div class="hint">
					Creates a new listing with the given data. Returns the new item in JSON format on success.
				</div>
			</li>
			<li>
				<code>
				curl -X DELETE <span class="url">[url]</span>/item/[item id]
			</code>
				<div class="hint">
					Deletes the item with the given id.
				</div>
			</li>
		</ul>
	</main>
	<script>
		const origin = window.location.origin;
		// Dynamically set the url for the curl commands
		for (elem of document.getElementsByClassName('url')) {
			elem.innerHTML = origin;
		}
		const client = origin.replace("8000", "8001"); // Client uses port 8001, server uses 8000
		// Dynamically set the path for the client, with api included in the query
		document.getElementById('client-url').setAttribute('href', `${client}/?api=${origin}`);
	</script>
</body>

</html>